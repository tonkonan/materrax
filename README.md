# Materrax — Quickstart (Buyer/Supplier, перевозка материалов)

Цель: минимальный и практичный старт нового проекта на базе стека `Node/Express + PostgreSQL + Vue 3 + Vite` (как в `@TGF`), без лишних деталей. Две роли: Покупатель и Поставщик — площадка для поиска и матчинга в сфере перевозки материалов.

## Требования
- Node.js 18+
- npm (или yarn/pnpm)
- PostgreSQL 13+

## Установка и запуск (dev)
```bash
npm ci

# Настройте .env (см. env.example)
# Рекомендуемые значения:
# PORT=3001, PGHOST=localhost, PGDATABASE=materrax

# Создайте базу (имя можно поменять)
createdb materrax

# Примените миграции каркаса (@TGF) при необходимости:
# psql -d materrax -f migrations/001_initial_setup.sql
# ... далее по порядку

# Запуск разработки с корректным прокси Vite → API
PORT=3001 npm run dev
```

- Фронтенд: `http://localhost:5174`
- API: Vite проксирует `/api` на `http://localhost:3001`

Если нужно проверить собранный фронтенд:
```bash
npm run build
npm run serve-built  # откроется http://localhost:5174 (vite preview)
```

## Соглашения по портам
- Сервер (`server.js`): `PORT=3001` в dev
- Vite: `5174` в dev
- `vite.config.js` должен проксировать `/api` на `http://localhost:3001`

## Окружение (.env)
Скопируйте `env.example` → `.env` и заполните значения:
- `PORT` — порт API (dev: 3001)
- `PG*` — доступ к PostgreSQL
- `JWT_SECRET` — секрет для токенов (замените!)

## Базовые доменные модули (MVP)
- Аутентификация: регистрация, логин, JWT-сессии.
- Профили: Покупатель, Поставщик (единая таблица пользователей + роли).
- Запросы на перевозку (от Покупателя): груз, объём, откуда/куда, сроки, бюджет.
- Офферы (от Поставщика): ставка/цена, условия, сроки.
- Матчинг и поиск: фильтры по параметрам груза/маршрута.
- Сообщения/контакты: чат или обмен контактами (минимально).
- Админ/модерация: блокировки, логи (минимально).

## Продакшен (кратко, опционально)
```bash
npm ci
npm run build
PORT=3000 NODE_ENV=production node server.js
```
Рекомендуется процесс-менеджер (PM2) и reverse proxy (nginx) — можно взять из полного гайда `@TGF` при необходимости.

## Где писать код
- Фронтенд: `src/` (Vue 3 + Vite)
- Страницы: `src/views/`, маршруты — `src/router/`
- Компоненты: `src/components/`
- API-клиент: `src/services/`
- Бэкенд API/статик: `server.js`
- Миграции БД: `migrations/`

## Полный детальный гайд
Если нужен расширенный деплой/инфраструктура (PM2, nginx и т.д.) — см. `ИНИЦИАЛИЗАЦИЯ-НОВОГО-ПРОЕКТА.md`.


